"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{6923:function(e,t,a){a.r(t);var n=a(5893),o=a(7294),s=a(6219),l=a(5658),r=a(2062),i=a(3071),c=a(8086),d=a(1710),m=a(4856);t.default=e=>{let{expenses:t,isLoading:a}=e,[u,h]=(0,o.useState)({}),[x,g]=(0,o.useState)(0),[p,f]=(0,o.useState)([]),[v,y]=(0,o.useState)("$"),{getTag:b}=(0,c.e0)();return((0,o.useEffect)(()=>{let e=async()=>{try{let e=await d.Z.getUserData();y((0,m.jK)(e.preferred_currency))}catch(e){console.error("Error fetching user currency:",e)}};e()},[]),(0,o.useEffect)(()=>{if(!t||0===t.length){f([]),g(0);return}let e=t.reduce((e,t)=>e+t.amount,0);g(e);let a={};t.forEach(e=>{e.area_tags&&e.area_tags.length>0?e.area_tags.forEach(t=>{a[t]||(a[t]={name:t,amount:0,count:0,icon:e.main_tag_icon||t,tagId:e.tag_id}),a[t].amount+=e.amount,a[t].count+=1}):(a.Other||(a.Other={name:"Other",amount:0,count:0,icon:"HelpCircle"}),a.Other.amount+=e.amount,a.Other.count+=1)});let n=Object.values(a).map(t=>({...t,percentage:Math.round(t.amount/e*100)}));n.sort((e,t)=>t.amount-e.amount),f(n);let o=n.map(e=>{var t;let a=e.tagId?b(e.tagId):b(e.name),n=(null==a?void 0:null===(t=a.colors)||void 0===t?void 0:t.hex)||"#d1d5db";return{name:e.name,value:e.amount,itemStyle:{color:n}}});h({tooltip:{trigger:"item",formatter:e=>{let t=n.find(t=>t.name===e.name);return'\n            <div style="padding: 8px;">\n              <div style="font-weight: bold; margin-bottom: 4px;">'.concat(e.name,"</div>\n              <div>Amount: ").concat(v).concat(e.value.toFixed(2),"</div>\n              <div>Percentage: ").concat(e.percent,"%</div>\n              <div>Expenses: ").concat(t?t.count:0,"</div>\n            </div>\n          ")}},legend:{show:!0,orient:"horizontal",bottom:15,left:"center",type:"scroll",pageButtonPosition:"end",pageButtonGap:5,pageButtonItemGap:5,pageIconColor:"#666",pageIconInactiveColor:"#aaa",pageIconSize:15,itemWidth:25,itemHeight:14,itemGap:20,textStyle:{color:"#374151",fontSize:12,fontWeight:"500"},pageTextStyle:{color:"#6B7280"}},series:[{name:"Expenses by Category",type:"pie",radius:["45%","75%"],center:["50%","40%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1},emphasis:{label:{show:!1},scale:!0,scaleSize:5},labelLine:{show:!1},data:o}]})},[t,b,v]),a)?(0,n.jsx)("div",{className:"bg-white rounded-3xl shadow-md p-6 flex items-center justify-center",style:{minHeight:"300px"},children:(0,n.jsx)(l.Z,{})}):t&&0!==t.length?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"h-80 mb-1",children:(0,n.jsx)(s.Z,{option:u,style:{height:"100%",width:"100%"},opts:{renderer:"canvas"},notMerge:!0,lazyUpdate:!0})}),(0,n.jsx)("div",{className:"space-y-1 mt-1",children:p.map((e,t)=>{var a;let o=e.tagId?b(e.tagId):b(e.name),s=(null==o?void 0:null===(a=o.colors)||void 0===a?void 0:a.hex)||"#d1d5db",l=x>0?e.amount/x*100:0;return(0,n.jsxs)("div",{className:"flex items-center justify-between py-2 px-1 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(i.Z,{iconName:(null==o?void 0:o.icon)||"tag",iconColor:s,size:20,className:"mr-3",fallbackIcon:"tag"}),(0,n.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[v,e.amount.toFixed(2)]}),(0,n.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(s,"20"),color:s},children:[l.toFixed(0),"%"]})]})]},t)})})]}):(0,n.jsxs)("div",{className:"bg-white rounded-3xl shadow-md p-6 flex flex-col items-center justify-center",style:{minHeight:"300px"},children:[(0,n.jsx)(r.Z,{name:"PieChart",className:"w-12 h-12 text-gray-300 mb-4"}),(0,n.jsx)("p",{className:"text-gray-500 text-center",children:"No expense data available for this period"})]})}},3071:function(e,t,a){var n=a(5893),o=a(7294),s=a(2062);t.Z=o.memo(e=>{let{iconName:t,iconColor:a,size:o=24,className:l="",fallbackIcon:r="tag",style:i={}}=e,c={color:a,...i};return(0,n.jsx)(s.Z,{iconName:t||r,size:o,className:l,defaultIcon:r,style:c})},(e,t)=>e.iconName===t.iconName&&e.iconColor===t.iconColor&&e.size===t.size&&e.className===t.className&&e.fallbackIcon===t.fallbackIcon&&JSON.stringify(e.style)===JSON.stringify(t.style))},4856:function(e,t,a){a.d(t,{jK:function(){return o}});let n={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CAD:"CA$",AUD:"A$",CHF:"CHF",CNY:"\xa5",INR:"₹"},o=e=>n[e]||e||""}}]);