"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{2062:function(e,t,a){var r=a(5893);a(7294);var n=a(7814),s=a(9417),o=a(3636);a(6910),o.vI.add(s.mRB);let c=e=>e?e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z][a-z])/g,"$1-$2").toLowerCase():"";t.Z=e=>{let{iconName:t,size:a,className:s="",defaultIcon:o="tag",style:i={}}=e;console.log("[DynamicIcon] Received iconName:",t);let l=t||o;console.log("[DynamicIcon] iconToRender (original):",l);let d=c(l);console.log("[DynamicIcon] iconToRender (kebab-case):",d);let u={...i};"number"==typeof a?u.fontSize="".concat(a,"px"):"string"!=typeof a||["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a.toLowerCase())||(u.fontSize=a);try{return(0,r.jsx)(n.G,{icon:d,size:"string"==typeof a&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a.toLowerCase())?a:void 0,className:s,style:u,"aria-label":t||o})}catch(e){console.error('[DynamicIcon] Error rendering icon "'.concat(d,'" (original: "').concat(l,'"):'),e),console.warn('[DynamicIcon] FontAwesome icon "'.concat(d,'" not found or error during render. Falling back to "').concat(c("tag"),'".'));try{return(0,r.jsx)(n.G,{icon:c("tag"),size:"string"==typeof a&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a.toLowerCase())?a:void 0,className:s,style:u,"aria-label":o})}catch(e){return console.error('[DynamicIcon] Error rendering DEFAULT_ICON "'.concat(c("tag"),'":'),e),(0,r.jsx)("span",{"aria-label":o,children:"⚠️"})}}}},5493:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(5893),n=a(1664),s=a.n(n),o=a(1163),c=a(2537),i=a(2062);function l(e){let{children:t}=e,a=(0,o.useRouter)(),{user:n}=(0,c.a)(),s="/login"===a.pathname||"/"===a.pathname;return s?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-[#7B3FE4] to-[#9C6EFF]",children:t}):(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,r.jsx)("main",{className:"flex-1 pb-16",children:t}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-100 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,r.jsx)(d,{href:"/home",icon:"home",active:"/home"===a.pathname}),(0,r.jsx)(d,{href:"/reports",icon:"reports",active:"/reports"===a.pathname}),(0,r.jsx)(d,{href:"/chat",icon:"add",active:"/chat"===a.pathname}),(0,r.jsx)(d,{href:"/history",icon:"history",active:"/history"===a.pathname}),(0,r.jsx)(d,{href:"/profile",icon:"profile",active:"/profile"===a.pathname})]})})]})}function d(e){let{href:t,icon:a,active:n}=e;return"add"===a?(0,r.jsx)(s(),{href:t,className:"flex items-center justify-center p-3",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-full shadow-md",style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:(0,r.jsx)(i.Z,{iconName:"plus",className:"h-6 w-6 text-white"})})}):(0,r.jsx)(s(),{href:t,className:"flex items-center justify-center p-3",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-10 w-10 rounded-full transition-all duration-300 ".concat(n?"scale-110 shadow-sm":""),style:{background:n?"rgba(124, 58, 237, 0.15)":"transparent"},children:(0,r.jsx)(i.Z,{iconName:(e=>{switch(e){case"home":return"house";case"reports":return"chart-simple";case"history":return"clock-rotate-left";case"profile":return"user";case"add":return"plus";default:return"circle"}})(a),className:"h-5 w-5 ".concat(n?"text-purple-600":"text-gray-400"),style:{fontWeight:n?"bold":"normal"}})})})}},5658:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(5893),n=a(2332),s=a.n(n);function o(e){let{size:t="medium",containerClass:a="",text:n="",fullPage:o=!1,type:c="dots"}=e,i={small:{container:"h-6 py-1.5 px-2.5 rounded-2xl",dot:"w-1.5 h-1.5",icon:"h-8 w-8",text:"text-sm"},medium:{container:"h-8 py-2 px-3 rounded-3xl",dot:"w-2 h-2",icon:"h-12 w-12",text:"text-base"},large:{container:"h-10 py-2.5 px-4 rounded-3xl",dot:"w-2.5 h-2.5",icon:"h-16 w-16",text:"text-lg"}},l=i[t]||i.medium;return(0,r.jsxs)("div",{className:"jsx-6e91c5b2b63165c2 "+((o?"flex flex-col justify-center items-center ".concat(!0===o?"h-full w-full absolute inset-0":o):"")||""),children:["spinner"===c?(0,r.jsx)("div",{className:"inline-block p-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600",children:(0,r.jsx)("img",{src:"/PiggyLogo.png",alt:"Loading",className:"".concat(l.icon," animate-spin object-contain")})}):(0,r.jsx)("div",{className:"flex justify-center items-center space-x-2 ".concat(l.container," shadow-md relative ").concat(a),style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"".concat(l.dot," rounded-full bg-white"),style:{opacity:.8,transform:"translateZ(0)",animation:"wave 0.8s ease-in-out ".concat(.1*t,"s infinite alternate")}},t))}),n&&(0,r.jsx)("p",{className:"jsx-6e91c5b2b63165c2 "+"mt-4 ".concat(l.text," font-medium bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"),children:n}),(0,r.jsx)(s(),{id:"6e91c5b2b63165c2",children:"@-webkit-keyframes wave{0%{-webkit-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-moz-keyframes wave{0%{-moz-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-moz-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-o-keyframes wave{0%{-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@keyframes wave{0%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);-moz-transform:translatey(-5px);-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}"})]})}a(7294)},558:function(e,t,a){a.d(t,{i:function(){return c}});var r=a(5893),n=a(7294),s=a(1163),o=a(2537);function c(e){let{children:t}=e,{isAuthenticated:a,loading:c}=(0,o.a)(),i=(0,s.useRouter)(),[l,d]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{c||(a()?d(!0):i.push("/login"))},[a,c,i]),c||!l)?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50"}):t}},1139:function(e,t,a){var r=a(5893);a(7294),t.Z=e=>{let{className:t="",height:a="h-64"}=e;return(0,r.jsxs)("div",{className:"animate-pulse bg-white rounded-xl shadow-md overflow-hidden ".concat(a," ").concat(t),children:[(0,r.jsxs)("div",{className:"h-10 bg-gray-100 px-4 py-2 flex items-center",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,r.jsxs)("div",{className:"ml-auto flex space-x-2",children:[(0,r.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"})]})]}),(0,r.jsxs)("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[(0,r.jsx)("div",{className:"flex items-end h-40 space-x-2 mt-4",children:[...Array(12)].map((e,t)=>(0,r.jsx)("div",{className:"bg-gray-200 rounded-t w-full",style:{height:"".concat(15+Math.floor(70*Math.random()),"%")}},t))}),(0,r.jsx)("div",{className:"flex justify-between mt-2 pt-2 border-t border-gray-100",children:[...Array(6)].map((e,t)=>(0,r.jsx)("div",{className:"h-2 bg-gray-200 rounded w-8"},t))})]})]})}},4671:function(e,t,a){a.d(t,{d:function(){return o},t:function(){return s}});var r=a(9734),n=a(4682);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldFetch:t=!0,revalidateOnFocus:a=!1,dedupingInterval:s=3e4,...o}=e,{data:c,error:i,mutate:l,isValidating:d}=(0,r.ZP)(t?"/api/expenses/":null,async()=>{try{let e=await n.Z.getExpenses();return[...e].sort((e,t)=>new Date(t.timestamp||t.date)-new Date(e.timestamp||e.date))}catch(e){throw console.error("Error fetching expenses:",e),e}},{revalidateOnFocus:a,dedupingInterval:s,...o});return{expenses:c||[],isLoading:!i&&!c,isValidating:d,isError:i,mutate:l}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Date,a=t.getMonth(),r=t.getFullYear(),n=new Date;n.setDate(n.getDate()-7);let s=e.filter(e=>{let t=new Date(e.timestamp||e.date);return t.getMonth()===a&&t.getFullYear()===r}),o=e.filter(e=>{let t=new Date(e.timestamp||e.date);return t>=n}),c=s.reduce((e,t)=>e+(parseFloat(t.amount)||0),0),i=o.reduce((e,t)=>e+(parseFloat(t.amount)||0),0),l={},d=new Date(r,a+1,0).getDate();for(let e=1;e<=d;e++){let t=e.toString();l[t]={day:t,amount:0}}s.forEach(e=>{let t=new Date(e.timestamp||e.date),a=t.getDate().toString();l[a]&&(l[a].amount+=parseFloat(e.amount)||0)});let u=Object.values(l).sort((e,t)=>parseInt(e.day)-parseInt(t.day));return{monthlyTotal:c,weeklyTotal:i,monthlyExpenses:s,weeklyExpenses:o,dailyExpenses:u}}},8530:function(e,t,a){a.d(t,{v:function(){return s}});var r=a(9734),n=a(1710);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldFetch:t=!0,revalidateOnFocus:a=!1,dedupingInterval:s=6e4,...o}=e,{data:c,error:i,mutate:l,isValidating:d}=(0,r.ZP)(t?"/api/users/me":null,async()=>{try{return await n.Z.getUserData()}catch(e){throw console.error("Error fetching user data:",e),e}},{revalidateOnFocus:a,dedupingInterval:s,...o});return{userData:c||{},isLoading:!i&&!c,isValidating:d,isError:i,mutate:l}}},4682:function(e,t,a){var r=a(7066),n=a(8346);let s="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("Expense service using API URL:",s);let o=async()=>{let e=(0,n.v0)(),t=e.currentUser;if(!t)throw Error("User not authenticated");return await t.getIdToken()},c=async()=>{let e=await o();return r.Z.create({baseURL:s,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={getAuthToken:o,async getExpenses(){try{let e=await c();console.log("Sending GET request to /api/expenses/");let t=await e.get("/api/expenses/");console.log("Received response from /api/expenses/:",t.status);let a=Array.isArray(t.data)?t.data:[],r=a.map(e=>({...e,amount:"number"==typeof e.amount?e.amount:parseFloat(e.amount||0),area_tags:Array.isArray(e.area_tags)?e.area_tags:[],context_tags:Array.isArray(e.context_tags)?e.context_tags:[],timestamp:e.timestamp||new Date().toISOString()}));return r}catch(e){return console.error("Error fetching expenses:",e),[]}},async getExpense(e){try{let t=await c(),a=await t.get("/api/expenses/".concat(e));return a.data}catch(e){throw console.error("Error fetching expense:",e),e}},async createExpense(e){try{let t=await c(),a=await t.post("/api/expenses/",e);return a.data}catch(e){throw console.error("Error creating expense:",e),e}},async updateExpense(e,t){try{let a=await c(),r=await a.patch("/api/expenses/".concat(e),t);return r.data}catch(e){throw console.error("Error updating expense:",e),e}},async deleteExpense(e){try{if(console.log("Attempting to delete expense with ID: ".concat(e)),!e)throw Error("No expense ID provided for deletion");let t=await c(),a="".concat(s,"/api/expenses/").concat(e);console.log("Sending DELETE request to: ".concat(a));let r=await t.delete(a);return console.log("Delete response:",r.status,r.statusText),!0}catch(e){throw console.error("Error deleting expense:",e),e}}}},1710:function(e,t,a){var r=a(7066),n=a(8346);let s="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("User service using API URL:",s);let o=async()=>{let e=(0,n.v0)(),t=e.currentUser;if(!t)throw Error("User not authenticated");return await t.getIdToken()},c=async()=>{let e=await o();return r.Z.create({baseURL:s,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={async getUserData(){try{let e=await c(),t=await e.get("/api/users/me");return t.data}catch(e){throw console.error("Error fetching user data:",e),e}},async updateUserData(e){try{let t=await c(),a=await t.patch("/api/users/me",e);return a.data}catch(e){throw console.error("Error updating user data:",e),e}}}}}]);