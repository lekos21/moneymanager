"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{9281:function(e,t,s){s.d(t,{ZP:function(){return h}});var a=s(5893),r=s(7294),n=s(1373);let o=(0,n.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),l=(0,n.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),c=(0,n.Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var i=s(2062),d=s(4682),u=s(9108),p=s(417);let x={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CAD:"C$",AUD:"A$",CHF:"Fr",CNY:"\xa5",INR:"₹",BRL:"R$"},g=e=>x[e]||e;var h=e=>{let{expense:t,messageId:s,onDelete:n,fullWidth:x=!1}=e,[h,y]=(0,r.useState)(!1),m=async()=>{if(console.log("Deleting expense with ID:",t.id),!t.id){console.error("No expense ID found:",t);return}try{await d.Z.deleteExpense(t.id),console.log("Expense deleted successfully"),s&&(console.log("Deleting associated message with ID:",s),await u.Z.deleteMessage(s),console.log("Message deleted successfully")),n(t.id,s),y(!1)}catch(e){console.error("Failed to delete expense or message:",e),alert("Failed to delete. Please try again."),y(!1)}},f=(null==t?void 0:t.main_tag_icon)||"tag",v=(()=>{var e;if(null==t?void 0:null===(e=t.area_tags)||void 0===e?void 0:e[0]){let e=t.area_tags[0].toLowerCase();return(0,p.n4)(e)}return(0,p.n4)("default")})();return(0,a.jsxs)("div",{className:"rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow bg-white ".concat("w-full"," border-2 border-l-4 ").concat(v),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 border-b-2 border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center mr-2",children:(0,a.jsx)(i.Z,{name:f,size:20,className:"text-gray-700"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:t.short_text||"Expense"}),(0,a.jsxs)("span",{className:"flex items-center text-xs text-gray-500 space-x-1",children:[(0,a.jsx)("span",{children:new Date(t.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric"})}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:new Date(t.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,a.jsxs)("div",{className:"font-bold",children:[g(t.currency),parseFloat(t.amount).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"px-3 py-2 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[t.area_tags&&t.area_tags.map(e=>{let t=e.toLowerCase();return(0,a.jsx)("span",{className:"px-2 py-0.5 ".concat((0,p.Pe)(t)," ").concat((0,p.x$)(t)," rounded-full text-xs font-semibold"),children:e},"area-".concat(e))}),t.context_tags&&t.context_tags.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 rounded-full text-xs font-semibold",children:e},"context-".concat(e)))]}),h?(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>y(!1),className:"p-1 text-xs text-gray-600 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",children:(0,a.jsx)(o,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:m,className:"p-1 text-xs text-white rounded-full hover:opacity-90 transition-opacity",style:{background:"linear-gradient(45deg, #E74C3C, #cf8ef9)"},children:(0,a.jsx)(l,{className:"w-3 h-3"})})]}):(0,a.jsx)("button",{onClick:()=>y(!0),className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:(0,a.jsx)(c,{className:"w-4 h-4"})})]})]})}},9108:function(e,t,s){var a=s(7066),r=s(8346);let n="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("Using API URL:",n);let o=async()=>{let e=(0,r.v0)(),t=e.currentUser;if(!t)throw Error("User not authenticated");return await t.getIdToken()},l=async()=>{let e=await o();return a.Z.create({baseURL:n,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={getAuthToken:o,async getMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let t=await l(),s="/api/chat/messages?limit=".concat(e);console.log("Fetching messages from:",s);let a=await t.get(s);return console.log("Messages fetched successfully"),a.data}catch(e){var t;return console.error("Error fetching messages:",e),console.error("Response details:",null===(t=e.response)||void 0===t?void 0:t.data),console.log("Returning fallback messages"),[{id:"fallback-1",content:"Welcome to Money Manager! The message service is currently experiencing issues. Your previous messages will appear when service is restored.",user_id:"system",timestamp:new Date().toISOString(),message_type:"system"}]}},async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";try{let s=await l(),a=await s.post("/api/chat/messages",{content:e,message_type:t});return a.data}catch(e){throw console.error("Error sending message:",e),e}},async deleteMessage(e){try{let t=await l();return await t.delete("/api/chat/messages/".concat(e)),!0}catch(e){throw console.error("Error deleting message:",e),e}},async parseExpense(e){try{let t=await l();console.log("Sending expense parser request:",{text:e,save_to_db:!0});let s=await t.post("/api/agents/expense_parser/",{text:e,save_to_db:!0});return console.log("Expense parser response:",s.data),s.data}catch(e){var t;throw console.error("Error parsing expense:",e),console.error("Error details:",null===(t=e.response)||void 0===t?void 0:t.data),e}}}},4311:function(e,t,s){s.d(t,{ZT:function(){return r}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}},5263:function(e,t){var s=function(){function e(e){this.colorStops=e||[]}return e.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},e}();t.Z=s},816:function(e,t,s){var a=s(4311),r=function(e){function t(t,s,a,r,n,o){var l=e.call(this,n)||this;return l.x=null==t?0:t,l.y=null==s?0:s,l.x2=null==a?1:a,l.y2=null==r?0:r,l.type="linear",l.global=o||!1,l}return(0,a.ZT)(t,e),t}(s(5263).Z);t.Z=r}}]);