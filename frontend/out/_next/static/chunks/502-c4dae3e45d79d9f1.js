"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{2062:function(e,t,a){var r=a(5893);a(7294);var n=a(7814),o=a(9417),s=a(3636);a(6910),s.vI.add(o.mRB);let c=e=>e?e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z][a-z])/g,"$1-$2").toLowerCase():"";t.Z=e=>{let{iconName:t,size:a,className:o="",defaultIcon:s="tag",style:i={}}=e;console.log("[DynamicIcon] Received iconName:",t);let l=t||s;console.log("[DynamicIcon] iconToRender (original):",l);let u=c(l);console.log("[DynamicIcon] iconToRender (kebab-case):",u);let d={...i};"number"==typeof a?d.fontSize="".concat(a,"px"):"string"!=typeof a||["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a.toLowerCase())||(d.fontSize=a);try{return(0,r.jsx)(n.G,{icon:u,size:"string"==typeof a&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a.toLowerCase())?a:void 0,className:o,style:d,"aria-label":t||s})}catch(e){console.error('[DynamicIcon] Error rendering icon "'.concat(u,'" (original: "').concat(l,'"):'),e),console.warn('[DynamicIcon] FontAwesome icon "'.concat(u,'" not found or error during render. Falling back to "').concat(c("tag"),'".'));try{return(0,r.jsx)(n.G,{icon:c("tag"),size:"string"==typeof a&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a.toLowerCase())?a:void 0,className:o,style:d,"aria-label":s})}catch(e){return console.error('[DynamicIcon] Error rendering DEFAULT_ICON "'.concat(c("tag"),'":'),e),(0,r.jsx)("span",{"aria-label":s,children:"⚠️"})}}}},5493:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(5893),n=a(1664),o=a.n(n),s=a(1163),c=a(2537),i=a(2062);function l(e){let{children:t}=e,a=(0,s.useRouter)(),{user:n}=(0,c.a)(),o="/login"===a.pathname||"/"===a.pathname;return o?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-[#7B3FE4] to-[#9C6EFF]",children:t}):(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,r.jsx)("main",{className:"flex-1 pb-16",children:t}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-100 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,r.jsx)(u,{href:"/home",icon:"home",active:"/home"===a.pathname}),(0,r.jsx)(u,{href:"/reports",icon:"reports",active:"/reports"===a.pathname}),(0,r.jsx)(u,{href:"/chat",icon:"add",active:"/chat"===a.pathname}),(0,r.jsx)(u,{href:"/history",icon:"history",active:"/history"===a.pathname}),(0,r.jsx)(u,{href:"/profile",icon:"profile",active:"/profile"===a.pathname})]})})]})}function u(e){let{href:t,icon:a,active:n}=e;return"add"===a?(0,r.jsx)(o(),{href:t,className:"flex items-center justify-center p-3",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-full shadow-md",style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:(0,r.jsx)(i.Z,{iconName:"plus",className:"h-6 w-6 text-white"})})}):(0,r.jsx)(o(),{href:t,className:"flex items-center justify-center p-3",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-10 w-10 rounded-full transition-all duration-300 ".concat(n?"scale-110 shadow-sm":""),style:{background:n?"rgba(124, 58, 237, 0.15)":"transparent"},children:(0,r.jsx)(i.Z,{iconName:(e=>{switch(e){case"home":return"house";case"reports":return"chart-simple";case"history":return"clock-rotate-left";case"profile":return"user";case"add":return"plus";default:return"circle"}})(a),className:"h-5 w-5 ".concat(n?"text-purple-600":"text-gray-400"),style:{fontWeight:n?"bold":"normal"}})})})}},558:function(e,t,a){a.d(t,{i:function(){return c}});var r=a(5893),n=a(7294),o=a(1163),s=a(2537);function c(e){let{children:t}=e,{isAuthenticated:a,loading:c}=(0,s.a)(),i=(0,o.useRouter)(),[l,u]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{c||(a()?u(!0):i.push("/login"))},[a,c,i]),c||!l)?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50"}):t}},4671:function(e,t,a){a.d(t,{d:function(){return s},t:function(){return o}});var r=a(9734),n=a(4682);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldFetch:t=!0,revalidateOnFocus:a=!1,dedupingInterval:o=3e4,...s}=e,{data:c,error:i,mutate:l,isValidating:u}=(0,r.ZP)(t?"/api/expenses/":null,async()=>{try{let e=await n.Z.getExpenses();return[...e].sort((e,t)=>new Date(t.timestamp||t.date)-new Date(e.timestamp||e.date))}catch(e){throw console.error("Error fetching expenses:",e),e}},{revalidateOnFocus:a,dedupingInterval:o,...s});return{expenses:c||[],isLoading:!i&&!c,isValidating:u,isError:i,mutate:l}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Date,a=t.getMonth(),r=t.getFullYear(),n=new Date;n.setDate(n.getDate()-7);let o=e.filter(e=>{let t=new Date(e.timestamp||e.date);return t.getMonth()===a&&t.getFullYear()===r}),s=e.filter(e=>{let t=new Date(e.timestamp||e.date);return t>=n}),c=o.reduce((e,t)=>e+(parseFloat(t.amount)||0),0),i=s.reduce((e,t)=>e+(parseFloat(t.amount)||0),0),l={},u=new Date(r,a+1,0).getDate();for(let e=1;e<=u;e++){let t=e.toString();l[t]={day:t,amount:0}}o.forEach(e=>{let t=new Date(e.timestamp||e.date),a=t.getDate().toString();l[a]&&(l[a].amount+=parseFloat(e.amount)||0)});let d=Object.values(l).sort((e,t)=>parseInt(e.day)-parseInt(t.day)),p={},x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let e=6;e>=0;e--){let t=new Date;t.setDate(t.getDate()-e);let a=x[t.getDay()],r=t.toISOString().split("T")[0];p[r]={day:a,date:r,amount:0}}s.forEach(e=>{let t=new Date(e.timestamp||e.date),a=t.toISOString().split("T")[0];p[a]&&(p[a].amount+=parseFloat(e.amount)||0)});let m=Object.values(p).sort((e,t)=>new Date(e.date)-new Date(t.date));return{monthlyTotal:c,weeklyTotal:i,monthlyExpenses:o,weeklyExpenses:s,dailyExpenses:d,weeklyExpensesChart:m}}},4682:function(e,t,a){var r=a(7066),n=a(8346);let o="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("Expense service using API URL:",o);let s=async()=>{let e=(0,n.v0)(),t=e.currentUser;if(!t)throw Error("User not authenticated");return await t.getIdToken()},c=async()=>{let e=await s();return r.Z.create({baseURL:o,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={getAuthToken:s,async getExpenses(){try{let e=await c();console.log("Sending GET request to /api/expenses/");let t=await e.get("/api/expenses/");console.log("Received response from /api/expenses/:",t.status);let a=Array.isArray(t.data)?t.data:[],r=a.map(e=>({...e,amount:"number"==typeof e.amount?e.amount:parseFloat(e.amount||0),area_tags:Array.isArray(e.area_tags)?e.area_tags:[],context_tags:Array.isArray(e.context_tags)?e.context_tags:[],timestamp:e.timestamp||new Date().toISOString()}));return r}catch(e){return console.error("Error fetching expenses:",e),[]}},async getExpense(e){try{let t=await c(),a=await t.get("/api/expenses/".concat(e));return a.data}catch(e){throw console.error("Error fetching expense:",e),e}},async createExpense(e){try{let t=await c(),a=await t.post("/api/expenses/",e);return a.data}catch(e){throw console.error("Error creating expense:",e),e}},async updateExpense(e,t){try{let a=await c(),r=await a.patch("/api/expenses/".concat(e),t);return r.data}catch(e){throw console.error("Error updating expense:",e),e}},async deleteExpense(e){try{if(console.log("Attempting to delete expense with ID: ".concat(e)),!e)throw Error("No expense ID provided for deletion");let t=await c(),a="".concat(o,"/api/expenses/").concat(e);console.log("Sending DELETE request to: ".concat(a));let r=await t.delete(a);return console.log("Delete response:",r.status,r.statusText),!0}catch(e){throw console.error("Error deleting expense:",e),e}}}}}]);