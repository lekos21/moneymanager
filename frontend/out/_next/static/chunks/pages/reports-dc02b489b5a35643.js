(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{1373:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(7294);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),o=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:d,...u},m)=>(0,r.createElement)("svg",{ref:m,...c,width:t,height:t,stroke:e,strokeWidth:n?24*Number(a)/Number(t):a,className:l("lucide",s),...!o&&!i(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),u=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...s},i)=>(0,r.createElement)(d,{ref:i,iconNode:t,className:l(`lucide-${n(o(e))}`,`lucide-${e}`,a),...s}));return a.displayName=o(e),a}},8442:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports",function(){return a(1137)}])},5658:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(5893),n=a(2332),s=a.n(n);function o(e){let{size:t="medium",containerClass:a="",text:n="",fullPage:o=!1,type:l="dots"}=e,i={small:{container:"h-6 py-1.5 px-2.5 rounded-2xl",dot:"w-1.5 h-1.5",icon:"h-8 w-8",text:"text-sm"},medium:{container:"h-8 py-2 px-3 rounded-3xl",dot:"w-2 h-2",icon:"h-12 w-12",text:"text-base"},large:{container:"h-10 py-2.5 px-4 rounded-3xl",dot:"w-2.5 h-2.5",icon:"h-16 w-16",text:"text-lg"}},c=i[t]||i.medium;return(0,r.jsxs)("div",{className:"jsx-6e91c5b2b63165c2 "+((o?"flex flex-col justify-center items-center ".concat(!0===o?"h-full w-full absolute inset-0":o):"")||""),children:["spinner"===l?(0,r.jsx)("div",{className:"inline-block p-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600",children:(0,r.jsx)("img",{src:"/PiggyLogo.png",alt:"Loading",className:"".concat(c.icon," animate-spin object-contain")})}):(0,r.jsx)("div",{className:"flex justify-center items-center space-x-2 ".concat(c.container," shadow-md relative ").concat(a),style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"".concat(c.dot," rounded-full bg-white"),style:{opacity:.8,transform:"translateZ(0)",animation:"wave 0.8s ease-in-out ".concat(.1*t,"s infinite alternate")}},t))}),n&&(0,r.jsx)("p",{className:"jsx-6e91c5b2b63165c2 "+"mt-4 ".concat(c.text," font-medium bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"),children:n}),(0,r.jsx)(s(),{id:"6e91c5b2b63165c2",children:"@-webkit-keyframes wave{0%{-webkit-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-moz-keyframes wave{0%{-moz-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-moz-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-o-keyframes wave{0%{-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@keyframes wave{0%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);-moz-transform:translatey(-5px);-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}"})]})}a(7294)},1139:function(e,t,a){"use strict";var r=a(5893);a(7294),t.Z=e=>{let{className:t="",height:a="h-64"}=e;return(0,r.jsxs)("div",{className:"animate-pulse bg-white rounded-xl shadow-md overflow-hidden ".concat(a," ").concat(t),children:[(0,r.jsxs)("div",{className:"h-10 bg-gray-100 px-4 py-2 flex items-center",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,r.jsxs)("div",{className:"ml-auto flex space-x-2",children:[(0,r.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"})]})]}),(0,r.jsxs)("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[(0,r.jsx)("div",{className:"flex items-end h-40 space-x-2 mt-4",children:[...Array(12)].map((e,t)=>(0,r.jsx)("div",{className:"bg-gray-200 rounded-t w-full",style:{height:"".concat(15+Math.floor(70*Math.random()),"%")}},t))}),(0,r.jsx)("div",{className:"flex justify-between mt-2 pt-2 border-t border-gray-100",children:[...Array(6)].map((e,t)=>(0,r.jsx)("div",{className:"h-2 bg-gray-200 rounded w-8"},t))})]})]})}},8530:function(e,t,a){"use strict";a.d(t,{v:function(){return s}});var r=a(9734),n=a(1710);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldFetch:t=!0,revalidateOnFocus:a=!1,dedupingInterval:s=6e4,...o}=e,{data:l,error:i,mutate:c,isValidating:d}=(0,r.ZP)(t?"/api/users/me":null,async()=>{try{return await n.Z.getUserData()}catch(e){throw console.error("Error fetching user data:",e),e}},{revalidateOnFocus:a,dedupingInterval:s,...o});return{userData:l||{},isLoading:!i&&!l,isValidating:d,isError:i,mutate:c}}},1137:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(5893),n=a(9008),s=a.n(n),o=a(5152),l=a.n(o),i=a(7294),c=a(5493),d=a(2537),u=a(558),m=a(5658),h=a(1139),x=a(4671);function g(){let{user:e}=(0,d.a)(),{expenses:t,isLoading:a,isError:n}=(0,x.t)();return console.log("Debug - User:",e),console.log("Debug - Expenses:",t),console.log("Debug - Is Loading:",a),console.log("Debug - Is Error:",n),(0,r.jsxs)("div",{className:"p-4 bg-yellow-100 border border-yellow-300 rounded",children:[(0,r.jsx)("h3",{className:"font-bold",children:"Debug Info:"}),(0,r.jsxs)("p",{children:["User authenticated: ",e?"Yes":"No"]}),(0,r.jsxs)("p",{children:["User email: ",(null==e?void 0:e.email)||"N/A"]}),(0,r.jsxs)("p",{children:["Expenses loading: ",a?"Yes":"No"]}),(0,r.jsxs)("p",{children:["Expenses error: ",n?"Yes":"No"]}),(0,r.jsxs)("p",{children:["Expenses count: ",(null==t?void 0:t.length)||0]}),(0,r.jsxs)("p",{children:["API URL: ","https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app"]})]})}var p=a(8530),f=a(1373);let y=(0,f.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),w=l()(()=>Promise.all([a.e(219),a.e(923)]).then(a.bind(a,6923)),{loadableGenerated:{webpack:()=>[6923]},loading:()=>(0,r.jsx)(h.Z,{})});function b(){let{user:e}=(0,d.a)(),{expenses:t,isLoading:a}=(0,x.t)(),{userData:n}=(0,p.v)(),[o,l]=(0,i.useState)("This Month"),[h,f]=(0,i.useState)(!1),b=(()=>{if(!t)return[];let e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.setDate(e.getDate()-e.getDay())),n=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()-1,1),l=new Date(e.getFullYear(),e.getMonth(),0),i=new Date(e.getFullYear(),e.getMonth()-3,1),c=new Date(e.getFullYear(),0,1);return t.filter(e=>{let t=new Date(e.timestamp||e.date);switch(o){case"Today":return t>=a;case"This Week":return t>=r;case"This Month":return t>=n;case"Last Month":return t>=s&&t<=l;case"Last 3 Months":return t>=i;case"This Year":return t>=c;default:return!0}})})(),j=b.reduce((e,t)=>e+(t.amount||0),0);return(0,r.jsx)(u.i,{children:(0,r.jsxs)(c.Z,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Reports - MoneyManager"}),(0,r.jsx)("meta",{name:"description",content:"View your spending analytics"})]}),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Reports"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"View your spending analytics"})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>f(!h),className:"w-full max-w-md flex items-center justify-between px-4 py-3 bg-white border border-gray-300 rounded-lg text-left focus:outline-none focus:ring-2 focus:ring-[#4d9fff] focus:border-transparent",children:[(0,r.jsx)("span",{className:"text-gray-700",children:o}),(0,r.jsx)(y,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(h?"rotate-180":"")})]}),h&&(0,r.jsx)("div",{className:"absolute top-full left-0 right-0 max-w-md mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:["Today","This Week","This Month","Last Month","Last 3 Months","This Year","Custom Range"].map(e=>(0,r.jsx)("button",{onClick:()=>{l(e),f(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg ".concat(o===e?"bg-gradient-to-r from-[#00e4ff] to-[#4d9fff] text-white":"text-gray-700"),children:e},e))})]})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Total Spending"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(()=>{let e=new Date;switch(o){case"Today":return e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});case"This Week":let t=new Date(e.setDate(e.getDate()-e.getDay())),a=new Date(t);return a.setDate(t.getDate()+6),"".concat(t.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric"}));case"This Month":return e.toLocaleDateString("en-US",{month:"long",year:"numeric"});case"Last Month":let r=new Date(e.getFullYear(),e.getMonth()-1,1);return r.toLocaleDateString("en-US",{month:"long",year:"numeric"});case"Last 3 Months":let n=new Date(e.getFullYear(),e.getMonth()-3,1);return"".concat(n.toLocaleDateString("en-US",{month:"short",year:"numeric"})," - ").concat(e.toLocaleDateString("en-US",{month:"short",year:"numeric"}));case"This Year":return e.getFullYear().toString();default:return""}})()})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["â‚¬",j.toFixed(2)]})})]})})}),a?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(m.Z,{})}):(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,r.jsx)(w,{expenses:b,isLoading:a})}),(0,r.jsx)(g,{})]})})]})})}},1710:function(e,t,a){"use strict";var r=a(7066),n=a(8346);let s="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("User service using API URL:",s);let o=async()=>{let e=(0,n.v0)(),t=e.currentUser;if(!t)throw Error("User not authenticated");return await t.getIdToken()},l=async()=>{let e=await o();return r.Z.create({baseURL:s,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={async getUserData(){try{let e=await l(),t=await e.get("/api/users/me");return t.data}catch(e){throw console.error("Error fetching user data:",e),e}},async updateUserData(e){try{let t=await l(),a=await t.patch("/api/users/me",e);return a.data}catch(e){throw console.error("Error updating user data:",e),e}}}}},function(e){e.O(0,[976,260,131,502,774,888,179],function(){return e(e.s=8442)}),_N_E=e.O()}]);