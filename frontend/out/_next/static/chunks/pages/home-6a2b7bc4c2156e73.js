(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{5732:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return t(2777)}])},5151:function(e,s,t){"use strict";var a=t(5893);t(7294),s.Z=e=>{let{className:s="",height:t="h-24",hasHeader:l=!0,hasFooter:r=!1}=e;return(0,a.jsxs)("div",{className:"animate-pulse bg-white rounded-xl shadow-md overflow-hidden ".concat(t," ").concat(s),children:[l&&(0,a.jsxs)("div",{className:"h-10 bg-gray-100 px-3 py-2 flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/5 mb-2"}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded w-2/5"})]}),(0,a.jsx)("div",{className:"w-16 h-4 bg-gray-200 rounded"})]}),(0,a.jsxs)("div",{className:"p-3 flex-1 flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-4/5"})]}),r&&(0,a.jsxs)("div",{className:"flex mt-3 pt-2 border-t border-gray-100",children:[(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-16 mr-2"}),(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-16"})]})]})]})}},2777:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(5893),l=t(7294),r=t(1163),n=t(9008),d=t.n(n),i=t(1664),c=t.n(i),o=t(5152),x=t.n(o),m=t(5493),h=t(2537),u=t(558),j=t(2062);t(5658);var g=t(5151),p=t(1139),y=t(4671),f=t(8530);let w=x()(()=>Promise.all([t.e(219),t.e(81)]).then(t.bind(t,7081)),{loadableGenerated:{webpack:()=>[7081]},loading:()=>(0,a.jsx)(p.Z,{})});function N(){(0,r.useRouter)();let{user:e}=(0,h.a)(),[s,t]=(0,l.useState)("monthly"),{expenses:n,isLoading:i,isError:o}=(0,y.t)(),{userData:x}=(0,f.v)(),{monthlyTotal:N,weeklyTotal:v,dailyExpenses:b,weeklyExpenses:k}=(0,y.d)(n),_=null==x?void 0:x.budget;return(0,a.jsx)(u.i,{children:(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:"Dashboard | Piggy"})}),(0,a.jsxs)("div",{className:"px-4 py-6 max-w-lg mx-auto",children:[(0,a.jsx)("header",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsx)("div",{children:(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:["Welcome ",e&&(e.displayName||e.email),"!"]})})})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Dashboard"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>t("monthly"),className:"px-3 py-1 rounded-full text-sm font-medium ".concat("monthly"===s?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600"),children:"Monthly"}),(0,a.jsx)("button",{onClick:()=>t("weekly"),className:"px-3 py-1 rounded-full text-sm font-medium ".concat("weekly"===s?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600"),children:"Weekly"})]})]}),i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(p.Z,{height:"h-64"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(g.Z,{}),(0,a.jsx)(g.Z,{})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(g.Z,{}),(0,a.jsx)(g.Z,{}),(0,a.jsx)(g.Z,{})]})]}):o?(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)("p",{className:"text-red-500",children:"Failed to load expenses. Please try again later."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 btn-primary",children:"Try Again"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(w,{activeTab:s,monthlyTotal:N,weeklyTotal:v,dailyExpenses:b,weeklyExpenses:k,budget:_}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Latest Expenses"}),(0,a.jsx)(c(),{href:"/history",legacyBehavior:!0,children:(0,a.jsx)("a",{className:"text-sm font-semibold bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:"View All"})})]}),0===n.length?(0,a.jsx)("div",{className:"text-center py-6 text-gray-500",children:(0,a.jsx)("p",{children:"No expenses found. Add your first expense!"})}):(0,a.jsx)("div",{className:"space-y-3",children:n.slice(0,4).map(e=>{let s=e.area_tags&&e.area_tags.length>0?e.area_tags[0]:"default",t=new Date(e.timestamp||e.date),l=function(e){let s=new Date(e);return s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}(t),r="default";return s&&(r=s.toLowerCase().includes("food")||s.toLowerCase().includes("restaurant")||s.toLowerCase().includes("grocery")?"food":s.toLowerCase().includes("transport")||s.toLowerCase().includes("travel")?"transport":s.toLowerCase().includes("shop")||s.toLowerCase().includes("clothes")?"shopping":s),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-3 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm",children:(0,a.jsx)(j.Z,{iconName:e.main_tag_icon||r,size:20,className:"text-gray-700"})}),(0,a.jsxs)("div",{className:"flex-1 ml-3",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.short_text}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:l})]}),(0,a.jsxs)("p",{className:"font-bold text-gray-800",children:["-$",parseFloat(e.amount).toFixed(2)]})]},e.id||"".concat(e.timestamp,"-").concat(e.amount,"-").concat(Math.random()))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(c(),{href:"/chat",legacyBehavior:!0,children:(0,a.jsx)("a",{className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 cursor-pointer",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-primary",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Add Expense"})]})})})},"add-expense"),(0,a.jsx)("div",{children:(0,a.jsx)(c(),{href:"/reports",legacyBehavior:!0,children:(0,a.jsx)("a",{className:"block",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 cursor-pointer",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-secondary",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Monthly Report"})]})})})},"monthly-report")]})]})]})]})})}}},function(e){e.O(0,[976,260,131,919,774,888,179],function(){return e(e.s=5732)}),_N_E=e.O()}]);