(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(7060)}])},2062:function(e,t,s){"use strict";var r=s(5893);s(7294);var a=s(7814),n=s(9417),l=s(3636);s(6910),l.vI.add(n.mRB);let i=e=>e?e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z][a-z])/g,"$1-$2").toLowerCase():"";t.Z=e=>{let{iconName:t,size:s,className:n="",defaultIcon:l="tag",style:c={}}=e;console.log("[DynamicIcon] Received iconName:",t);let o=t||l;console.log("[DynamicIcon] iconToRender (original):",o);let d=i(o);console.log("[DynamicIcon] iconToRender (kebab-case):",d);let x={...c};"number"==typeof s?x.fontSize="".concat(s,"px"):"string"!=typeof s||["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(s.toLowerCase())||(x.fontSize=s);try{return(0,r.jsx)(a.G,{icon:d,size:"string"==typeof s&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(s.toLowerCase())?s:void 0,className:n,style:x,"aria-label":t||l})}catch(e){console.error('[DynamicIcon] Error rendering icon "'.concat(d,'" (original: "').concat(o,'"):'),e),console.warn('[DynamicIcon] FontAwesome icon "'.concat(d,'" not found or error during render. Falling back to "').concat(i("tag"),'".'));try{return(0,r.jsx)(a.G,{icon:i("tag"),size:"string"==typeof s&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(s.toLowerCase())?s:void 0,className:n,style:x,"aria-label":l})}catch(e){return console.error('[DynamicIcon] Error rendering DEFAULT_ICON "'.concat(i("tag"),'":'),e),(0,r.jsx)("span",{"aria-label":l,children:"⚠️"})}}}},5493:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(5893),a=s(1664),n=s.n(a),l=s(1163),i=s(2537),c=s(2062);function o(e){let{children:t}=e,s=(0,l.useRouter)(),{user:a}=(0,i.a)(),n="/login"===s.pathname||"/"===s.pathname;return n?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-[#7B3FE4] to-[#9C6EFF]",children:t}):(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,r.jsx)("main",{className:"flex-1 pb-16",children:t}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-100 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,r.jsx)(d,{href:"/home",icon:"home",active:"/home"===s.pathname}),(0,r.jsx)(d,{href:"/reports",icon:"reports",active:"/reports"===s.pathname}),(0,r.jsx)(d,{href:"/chat",icon:"add",active:"/chat"===s.pathname}),(0,r.jsx)(d,{href:"/history",icon:"history",active:"/history"===s.pathname}),(0,r.jsx)(d,{href:"/profile",icon:"profile",active:"/profile"===s.pathname})]})})]})}function d(e){let{href:t,icon:s,active:a}=e;return"add"===s?(0,r.jsx)(n(),{href:t,className:"flex items-center justify-center p-3",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-full shadow-md",style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:(0,r.jsx)(c.Z,{iconName:"plus",className:"h-6 w-6 text-white"})})}):(0,r.jsx)(n(),{href:t,className:"flex items-center justify-center p-3",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-10 w-10 rounded-full transition-all duration-300 ".concat(a?"scale-110 shadow-sm":""),style:{background:a?"rgba(124, 58, 237, 0.15)":"transparent"},children:(0,r.jsx)(c.Z,{iconName:(e=>{switch(e){case"home":return"house";case"reports":return"chart-simple";case"history":return"clock-rotate-left";case"profile":return"user";case"add":return"plus";default:return"circle"}})(s),className:"h-5 w-5 ".concat(a?"text-purple-600":"text-gray-400"),style:{fontWeight:a?"bold":"normal"}})})})}},5658:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(5893),a=s(2332),n=s.n(a);function l(e){let{size:t="medium",containerClass:s="",text:a="",fullPage:l=!1,type:i="dots"}=e,c={small:{container:"h-6 py-1.5 px-2.5 rounded-2xl",dot:"w-1.5 h-1.5",icon:"h-8 w-8",text:"text-sm"},medium:{container:"h-8 py-2 px-3 rounded-3xl",dot:"w-2 h-2",icon:"h-12 w-12",text:"text-base"},large:{container:"h-10 py-2.5 px-4 rounded-3xl",dot:"w-2.5 h-2.5",icon:"h-16 w-16",text:"text-lg"}},o=c[t]||c.medium;return(0,r.jsxs)("div",{className:"jsx-6e91c5b2b63165c2 "+((l?"flex flex-col justify-center items-center ".concat(!0===l?"h-full w-full absolute inset-0":l):"")||""),children:["spinner"===i?(0,r.jsx)("div",{className:"inline-block p-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600",children:(0,r.jsx)("img",{src:"/PiggyLogo.png",alt:"Loading",className:"".concat(o.icon," animate-spin object-contain")})}):(0,r.jsx)("div",{className:"flex justify-center items-center space-x-2 ".concat(o.container," shadow-md relative ").concat(s),style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"".concat(o.dot," rounded-full bg-white"),style:{opacity:.8,transform:"translateZ(0)",animation:"wave 0.8s ease-in-out ".concat(.1*t,"s infinite alternate")}},t))}),a&&(0,r.jsx)("p",{className:"jsx-6e91c5b2b63165c2 "+"mt-4 ".concat(o.text," font-medium bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"),children:a}),(0,r.jsx)(n(),{id:"6e91c5b2b63165c2",children:"@-webkit-keyframes wave{0%{-webkit-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-moz-keyframes wave{0%{-moz-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-moz-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-o-keyframes wave{0%{-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@keyframes wave{0%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);-moz-transform:translatey(-5px);-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}"})]})}s(7294)},6909:function(e,t,s){"use strict";var r=s(5893);s(7294);var a=s(7537);t.Z=e=>{let{children:t,pageName:s="this page"}=e;return(0,r.jsx)(a.Z,{fallback:(e,t)=>(0,r.jsx)("div",{className:"min-h-[70vh] flex flex-col items-center justify-center p-6 text-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Something went wrong"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["We're sorry, but an error occurred while loading ",s,". This could be due to a temporary issue or a problem with your connection."]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)("button",{onClick:t,className:"btn-primary",children:"Try Again"}),(0,r.jsx)("button",{onClick:()=>window.location.href="/home",className:"btn-secondary",children:"Go to Home"})]}),!1]})}),children:t})}},558:function(e,t,s){"use strict";s.d(t,{i:function(){return i}});var r=s(5893),a=s(7294),n=s(1163),l=s(2537);function i(e){let{children:t}=e,{isAuthenticated:s,loading:i}=(0,l.a)(),c=(0,n.useRouter)(),[o,d]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{i||(s()?d(!0):c.push("/login"))},[s,i,c]),i||!o)?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50"}):t}},8530:function(e,t,s){"use strict";s.d(t,{v:function(){return n}});var r=s(9734),a=s(1710);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldFetch:t=!0,revalidateOnFocus:s=!1,dedupingInterval:n=6e4,...l}=e,{data:i,error:c,mutate:o,isValidating:d}=(0,r.ZP)(t?"/api/users/me":null,async()=>{try{return await a.Z.getUserData()}catch(e){throw console.error("Error fetching user data:",e),e}},{revalidateOnFocus:s,dedupingInterval:n,...l});return{userData:i||{},isLoading:!c&&!i,isValidating:d,isError:c,mutate:o}}},7060:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(5893),a=s(7294),n=s(9008),l=s.n(n),i=s(1163),c=s(5675),o=s.n(c),d=s(5493),x=s(2537),u=s(558),m=s(1710),h=s(7814),p=s(9417),f=s(6909),g=s(5658),y=s(8530);function j(){var e,t;let{user:s,logout:n}=(0,x.a)(),c=(0,i.useRouter)(),{userData:j,isLoading:b,isError:v,mutate:w}=(0,y.v)({shouldFetch:!!s,revalidateOnFocus:!0}),[N,k]=(0,a.useState)((null==j?void 0:null===(e=j.budget)||void 0===e?void 0:e.toString())||""),[C,E]=(0,a.useState)((null==j?void 0:j.preferred_currency)||"EUR"),[z,Z]=(0,a.useState)(!1),[F,S]=(0,a.useState)({show:!1,message:"",type:""}),[L,R]=(0,a.useState)(!1),[U,D]=(0,a.useState)(!1),_={totalExpenses:(null==j?void 0:j.totalExpenses)||0,totalCategories:(null==j?void 0:j.totalCategories)||0,expenseCount:(null==j?void 0:j.expenseCount)||0,streak:(null==j?void 0:j.streak)||0},A={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CAD:"CA$",AUD:"A$",CHF:"CHF",CNY:"\xa5",INR:"₹"},B=Object.keys(A),M=e=>A[e]||e||"";(0,a.useEffect)(()=>{j&&(j.budget&&k(j.budget.toString()),j.preferred_currency&&E(j.preferred_currency))},[j]);let I=async()=>{try{await n(),c.push("/login")}catch(e){console.error("Failed to logout",e)}},P=async e=>{let t=e.target.value;if(t!==C)try{R(!0),await m.Z.updateUserData({preferred_currency:t}),E(t),w(),S({show:!0,message:"Currency updated successfully!",type:"success"})}catch(e){console.error("Failed to update currency:",e),S({show:!0,message:"Failed to update currency.",type:"error"})}finally{R(!1)}},G=async()=>{try{R(!0);let e=""===N?0:parseFloat(N);await m.Z.updateUserData({budget:e}),w(),S({show:!0,message:"Budget updated successfully!",type:"success"}),Z(!1)}catch(e){console.error("Failed to update budget:",e),S({show:!0,message:"Failed to update budget.",type:"error"})}finally{R(!1)}};return b?(0,r.jsx)(u.i,{children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(g.Z,{})})}):v?(0,r.jsx)(u.i,{children:(0,r.jsx)(f.Z,{children:(0,r.jsx)(d.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("p",{className:"text-red-500",children:"Error loading profile. Please try again later."})})})})}):(0,r.jsx)(u.i,{children:(0,r.jsx)(f.Z,{children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Profile | MoneyManager"})}),(0,r.jsxs)("div",{className:"px-4 py-6 max-w-lg mx-auto",children:[(0,r.jsxs)("header",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Profile"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Manage your account"})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"relative h-16 w-16 rounded-full overflow-hidden bg-gray-200 mr-4",children:(null==s?void 0:s.photoURL)&&!U?(0,r.jsx)(o(),{src:s.photoURL,alt:"Profile",layout:"fill",objectFit:"cover",onError:()=>D(!0)}):(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-purple-100 text-purple-500",children:(0,r.jsx)(h.G,{icon:p.ILF,className:"text-2xl"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:(null==s?void 0:s.displayName)||"User"}),(0,r.jsx)("p",{className:"text-gray-500",children:null==s?void 0:s.email})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2",children:(0,r.jsx)(h.G,{icon:p.egO,className:"text-purple-500"})}),(0,r.jsx)("h3",{className:"text-gray-500",children:"Total Spent"})]}),(0,r.jsxs)("p",{className:"text-2xl font-semibold",children:[M(C),(null==_?void 0:null===(t=_.totalExpenses)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:(0,r.jsx)(h.G,{icon:p.owJ,className:"text-blue-500"})}),(0,r.jsx)("h3",{className:"text-gray-500",children:"Categories"})]}),(0,r.jsx)("p",{className:"text-2xl font-semibold",children:(null==_?void 0:_.totalCategories)||0})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Settings"})}),(0,r.jsxs)("div",{className:"divide-y divide-gray-100",children:[(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:"Monthly Budget"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Set your monthly spending limit"})]}),(0,r.jsxs)("button",{onClick:()=>Z(!0),className:"text-purple-600 hover:text-purple-800 font-medium flex items-center",children:[(null==j?void 0:j.budget)?"".concat(M(C)).concat(j.budget):"Set Budget",(0,r.jsx)(h.G,{icon:p._tD,className:"ml-2 text-sm"})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:"Currency"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Select your preferred currency"})]}),(0,r.jsx)("select",{value:C,onChange:P,className:"border border-gray-300 rounded-md px-3 py-1 bg-white focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:L,children:B.map(e=>(0,r.jsxs)("option",{value:e,children:[e," (",M(e),")"]},e))})]}),(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:"Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your notification preferences"})]}),(0,r.jsxs)("button",{className:"text-purple-600 hover:text-purple-800 font-medium flex items-center",children:[(0,r.jsx)(h.G,{icon:p.qmU,className:"mr-2"}),"Manage"]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800",children:"Privacy & Security"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Control your privacy settings"})]}),(0,r.jsxs)("button",{className:"text-purple-600 hover:text-purple-800 font-medium flex items-center",children:[(0,r.jsx)(h.G,{icon:p.U7t,className:"mr-2"}),"Manage"]})]})]})]}),(0,r.jsxs)("button",{onClick:I,className:"w-full py-3 bg-red-500 text-white rounded-lg flex items-center justify-center hover:bg-red-600 transition-colors",children:[(0,r.jsx)(h.G,{icon:p.jLD,className:"mr-2"}),"Logout"]})]}),z&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Set Monthly Budget"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",htmlFor:"budget",children:["Budget Amount (",M(C),")"]}),(0,r.jsx)("input",{id:"budget",type:"text",value:N,onChange:e=>{let t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&k(t)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter amount"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,r.jsx)("button",{onClick:()=>Z(!1),className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors font-medium",disabled:L,children:"Cancel"}),(0,r.jsx)("button",{onClick:G,className:"px-4 py-2 rounded-lg text-white font-medium transition-colors ".concat(!N||L?"bg-gray-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),disabled:!N||L,children:L?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Budget"})]})]})]})}),F.show&&(0,r.jsx)("div",{className:"fixed top-5 inset-x-0 flex justify-center items-start z-[100] px-4",children:(0,r.jsxs)("div",{className:"rounded-lg shadow-lg p-4 flex items-center text-white text-sm font-medium max-w-md w-full animate-fade-in-down\n                ".concat("success"===F.type?"bg-green-500":"error"===F.type?"bg-red-500":"bg-blue-500"),children:["success"===F.type?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):"error"===F.type?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),F.message]})})]})})})}},1710:function(e,t,s){"use strict";var r=s(7066),a=s(8346);let n="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("User service using API URL:",n);let l=async()=>{let e=(0,a.v0)(),t=e.currentUser;if(!t)throw Error("User not authenticated");return await t.getIdToken()},i=async()=>{let e=await l();return r.Z.create({baseURL:n,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={async getUserData(){try{let e=await i(),t=await e.get("/api/users/me");return t.data}catch(e){throw console.error("Error fetching user data:",e),e}},async updateUserData(e){try{let t=await i(),s=await t.patch("/api/users/me",e);return s.data}catch(e){throw console.error("Error updating user data:",e),e}}}}},function(e){e.O(0,[976,260,843,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);