(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(7060)}])},2062:function(e,s,t){"use strict";var a=t(5893);t(7294);var r=t(7814),l=t(9417),n=t(3636);t(6910),n.vI.add(l.mRB);let c=e=>e?e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z][a-z])/g,"$1-$2").toLowerCase():"";s.Z=e=>{let{iconName:s,size:t,className:l="",defaultIcon:n="tag",style:i={}}=e;console.log("[DynamicIcon] Received iconName:",s);let o=s||n;console.log("[DynamicIcon] iconToRender (original):",o);let d=c(o);console.log("[DynamicIcon] iconToRender (kebab-case):",d);let x={...i};"number"==typeof t?x.fontSize="".concat(t,"px"):"string"!=typeof t||["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(t.toLowerCase())||(x.fontSize=t);try{return(0,a.jsx)(r.G,{icon:d,size:"string"==typeof t&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(t.toLowerCase())?t:void 0,className:l,style:x,"aria-label":s||n})}catch(e){console.error('[DynamicIcon] Error rendering icon "'.concat(d,'" (original: "').concat(o,'"):'),e),console.warn('[DynamicIcon] FontAwesome icon "'.concat(d,'" not found or error during render. Falling back to "').concat(c("tag"),'".'));try{return(0,a.jsx)(r.G,{icon:c("tag"),size:"string"==typeof t&&["xs","sm","lg","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(t.toLowerCase())?t:void 0,className:l,style:x,"aria-label":n})}catch(e){return console.error('[DynamicIcon] Error rendering DEFAULT_ICON "'.concat(c("tag"),'":'),e),(0,a.jsx)("span",{"aria-label":n,children:"⚠️"})}}}},5493:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var a=t(5893),r=t(1664),l=t.n(r),n=t(1163),c=t(2537),i=t(2062);function o(e){let{children:s}=e,t=(0,n.useRouter)(),{user:r}=(0,c.a)(),l="/login"===t.pathname||"/"===t.pathname;return l?(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-[#7B3FE4] to-[#9C6EFF]",children:s}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,a.jsx)("main",{className:"flex-1 pb-16",children:s}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-100 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,a.jsx)(d,{href:"/home",icon:"home",active:"/home"===t.pathname}),(0,a.jsx)(d,{href:"/reports",icon:"reports",active:"/reports"===t.pathname}),(0,a.jsx)(d,{href:"/chat",icon:"add",active:"/chat"===t.pathname}),(0,a.jsx)(d,{href:"/history",icon:"history",active:"/history"===t.pathname}),(0,a.jsx)(d,{href:"/profile",icon:"profile",active:"/profile"===t.pathname})]})})]})}function d(e){let{href:s,icon:t,active:r}=e;return"add"===t?(0,a.jsx)(l(),{href:s,className:"flex items-center justify-center p-3",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-full shadow-md",style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:(0,a.jsx)(i.Z,{iconName:"plus",className:"h-6 w-6 text-white"})})}):(0,a.jsx)(l(),{href:s,className:"flex items-center justify-center p-3",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-10 w-10 rounded-full transition-all duration-300 ".concat(r?"scale-110 shadow-sm":""),style:{background:r?"rgba(124, 58, 237, 0.15)":"transparent"},children:(0,a.jsx)(i.Z,{iconName:(e=>{switch(e){case"home":return"house";case"reports":return"chart-simple";case"history":return"clock-rotate-left";case"profile":return"user";case"add":return"plus";default:return"circle"}})(t),className:"h-5 w-5 ".concat(r?"text-purple-600":"text-gray-400"),style:{fontWeight:r?"bold":"normal"}})})})}},558:function(e,s,t){"use strict";t.d(s,{i:function(){return c}});var a=t(5893),r=t(7294),l=t(1163),n=t(2537);function c(e){let{children:s}=e,{isAuthenticated:t,loading:c}=(0,n.a)(),i=(0,l.useRouter)(),[o,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{c||(t()?d(!0):i.push("/login"))},[t,c,i]),c||!o)?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50"}):s}},7060:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(5893),r=t(7294),l=t(9008),n=t.n(l),c=t(1163),i=t(5493),o=t(2537),d=t(558),x=t(1710),m=t(7814),u=t(9417);function h(){let{user:e,logout:s}=(0,o.a)(),t=(0,c.useRouter)(),[l,h]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),[f,y]=(0,r.useState)(null),[j,b]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[v,C]=(0,r.useState)(!1),[k,U]=(0,r.useState)({show:!1,message:"",type:""}),[A,E]=(0,r.useState)(!1),F={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CAD:"CA$",AUD:"A$",CHF:"CHF",CNY:"\xa5",INR:"₹"},R=Object.keys(F),S=e=>F[e]||e||"";(0,r.useEffect)(()=>{let e=async()=>{try{h(!0);let e=await x.Z.getUserData();y(e),e.budget&&b(e.budget.toString()),e.preferred_currency?N(e.preferred_currency):N("EUR"),p({totalExpenses:e.totalExpenses||1250.75,totalCategories:e.totalCategories||8,expenseCount:e.expenseCount||42,streak:e.streak||0}),h(!1)}catch(e){console.error("Failed to fetch user data:",e),U({show:!0,message:"Could not load user data.",type:"error"}),h(!1)}};e()},[]);let D=async()=>{try{await s(),t.push("/login")}catch(e){console.error("Failed to logout",e)}},_=async e=>{let s=e.target.value;if(s!==w)try{E(!0);let e=await x.Z.updateUserData({preferred_currency:s});y(e),N(s),U({show:!0,message:"Currency updated successfully!",type:"success"}),setTimeout(()=>U({show:!1,message:"",type:""}),3e3)}catch(e){console.error("Failed to update currency:",e),U({show:!0,message:"Failed to update currency.",type:"error"}),setTimeout(()=>U({show:!1,message:"",type:""}),3e3)}finally{E(!1)}},z=async()=>{try{E(!0);let e=await x.Z.updateUserData({budget:j?parseFloat(j):null});y(e),U({show:!0,message:j?"Budget updated successfully!":"Budget removed successfully!",type:"success"}),setTimeout(()=>U({show:!1,message:"",type:""}),3e3),C(!1)}catch(e){console.error("Failed to update budget:",e),U({show:!0,message:"Failed to update budget.",type:"error"}),setTimeout(()=>U({show:!1,message:"",type:""}),3e3)}finally{E(!1)}};return(0,a.jsx)(d.i,{children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:"Profile | MoneyManager"})}),(0,a.jsxs)("div",{className:"px-4 py-6 max-w-lg mx-auto",children:[(0,a.jsxs)("header",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Profile"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Manage your account"})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-start",children:[(null==e?void 0:e.photoURL)?(0,a.jsx)("img",{src:e.photoURL,alt:"User Avatar",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-100 shadow-sm mb-4 sm:mb-0 sm:mr-6"}):(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-blue-50 flex items-center justify-center text-blue-500 mb-4 sm:mb-0 sm:mr-6 border-2 border-gray-100",children:(null==e?void 0:e.displayName)?e.displayName.charAt(0).toUpperCase():(0,a.jsx)(m.G,{icon:u.ILF,className:"w-8 h-8"})}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:(null==e?void 0:e.displayName)||"User"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:null==e?void 0:e.email}),l?(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):g?(0,a.jsxs)("div",{className:"flex justify-between mt-2 bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"text-center px-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Expenses"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:g.expenseCount})]}),(0,a.jsxs)("div",{className:"text-center px-3 border-x border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Categories"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:g.totalCategories})]}),(0,a.jsxs)("div",{className:"text-center px-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Streak"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:[g.streak," days"]})]})]}):null]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 p-4 border-b border-gray-100",children:"Settings"}),(0,a.jsxs)("div",{className:"divide-y divide-gray-100",children:[(0,a.jsxs)("button",{onClick:()=>C(!0),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center mr-4 text-blue-500",children:(0,a.jsx)(m.G,{icon:u.egO,className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Monthly Budget"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(null==f?void 0:f.budget)?"".concat(S(w)).concat(parseFloat(f.budget).toFixed(2)):"Not set"})]})]}),(0,a.jsx)(m.G,{icon:u._tD,className:"w-4 h-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"w-full flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center mr-4 text-purple-500",children:(0,a.jsx)(m.G,{icon:u.owJ,className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Preferred Currency"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Current: ",w?"".concat(w," (").concat(S(w),")"):"Not set"]})]})]}),(0,a.jsx)("select",{value:w,onChange:_,className:"text-sm text-gray-700 border border-gray-200 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500 bg-white",disabled:A,children:R.map(e=>(0,a.jsxs)("option",{value:e,children:[e," (",S(e),")"]},e))})]}),(0,a.jsxs)("div",{className:"flex items-center p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>U({show:!0,message:"Account Security settings coming soon!",type:"info"}),children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center mr-4 text-green-500",children:(0,a.jsx)(m.G,{icon:u.U7t,className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Account & Security"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage password, 2FA"})]}),(0,a.jsx)(m.G,{icon:u._tD,className:"w-4 h-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"flex items-center p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>U({show:!0,message:"Notification settings coming soon!",type:"info"}),children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-50 rounded-lg flex items-center justify-center mr-4 text-yellow-500",children:(0,a.jsx)(m.G,{icon:u.qmU,className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage app notifications"})]}),(0,a.jsx)(m.G,{icon:u._tD,className:"w-4 h-4 text-gray-400"})]})]})]}),(0,a.jsxs)("button",{onClick:D,className:"w-full bg-white rounded-xl shadow-sm p-4 flex items-center mb-6 hover:bg-red-50 transition-colors",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center mr-4 text-red-500",children:(0,a.jsx)(m.G,{icon:u.jLD,className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Logout"})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-lg w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Set Monthly Budget"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Currency: ",w," (",S(w),")"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"budgetAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Amount"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-gray-500",children:S(w)})}),(0,a.jsx)("input",{id:"budgetAmount",type:"text",inputMode:"decimal",value:j,onChange:e=>{let s=e.target.value;(""===s||/^\d*\.?\d*$/.test(s))&&b(s)},placeholder:"e.g., 500.00",className:"pl-8 pr-3 py-3 block w-full text-gray-800 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Enter your monthly spending limit. Leave empty to remove budget."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,a.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors font-medium",disabled:A,children:"Cancel"}),(0,a.jsx)("button",{onClick:z,className:"px-4 py-2 rounded-lg text-white font-medium transition-colors ".concat(!j||A?"bg-gray-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),disabled:!j||A,children:A?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Budget"})]})]})]})}),k.show&&(0,a.jsx)("div",{className:"fixed top-5 inset-x-0 flex justify-center items-start z-[100] px-4",children:(0,a.jsxs)("div",{className:"rounded-lg shadow-lg p-4 flex items-center text-white text-sm font-medium max-w-md w-full animate-fade-in-down\n                ".concat("success"===k.type?"bg-green-500":"error"===k.type?"bg-red-500":"bg-blue-500"),children:["success"===k.type?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):"error"===k.type?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),k.message]})})]})]})})}},1710:function(e,s,t){"use strict";var a=t(7066),r=t(8346);let l="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("User service using API URL:",l);let n=async()=>{let e=(0,r.v0)(),s=e.currentUser;if(!s)throw Error("User not authenticated");return await s.getIdToken()},c=async()=>{let e=await n();return a.Z.create({baseURL:l,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};s.Z={async getUserData(){try{let e=await c(),s=await e.get("/api/users/me");return s.data}catch(e){throw console.error("Error fetching user data:",e),e}},async updateUserData(e){try{let s=await c(),t=await s.patch("/api/users/me",e);return t.data}catch(e){throw console.error("Error updating user data:",e),e}}}}},function(e){e.O(0,[976,260,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);