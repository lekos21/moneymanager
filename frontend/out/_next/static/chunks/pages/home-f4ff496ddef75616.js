(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{5732:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return a(2777)}])},5658:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(5893),r=a(2332),n=a.n(r);function l(e){let{size:t="medium",containerClass:a="",text:r="",fullPage:l=!1,type:i="dots"}=e,c={small:{container:"h-6 py-1.5 px-2.5 rounded-2xl",dot:"w-1.5 h-1.5",icon:"h-8 w-8",text:"text-sm"},medium:{container:"h-8 py-2 px-3 rounded-3xl",dot:"w-2 h-2",icon:"h-12 w-12",text:"text-base"},large:{container:"h-10 py-2.5 px-4 rounded-3xl",dot:"w-2.5 h-2.5",icon:"h-16 w-16",text:"text-lg"}},o=c[t]||c.medium;return(0,s.jsxs)("div",{className:"jsx-6e91c5b2b63165c2 "+((l?"flex flex-col justify-center items-center ".concat(!0===l?"h-full w-full absolute inset-0":l):"")||""),children:["spinner"===i?(0,s.jsx)("div",{className:"inline-block p-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600",children:(0,s.jsx)("img",{src:"/PiggyLogo.png",alt:"Loading",className:"".concat(o.icon," animate-spin object-contain")})}):(0,s.jsx)("div",{className:"flex justify-center items-center space-x-2 ".concat(o.container," shadow-md relative ").concat(a),style:{background:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"".concat(o.dot," rounded-full bg-white"),style:{opacity:.8,transform:"translateZ(0)",animation:"wave 0.8s ease-in-out ".concat(.1*t,"s infinite alternate")}},t))}),r&&(0,s.jsx)("p",{className:"jsx-6e91c5b2b63165c2 "+"mt-4 ".concat(o.text," font-medium bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"),children:r}),(0,s.jsx)(n(),{id:"6e91c5b2b63165c2",children:"@-webkit-keyframes wave{0%{-webkit-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-moz-keyframes wave{0%{-moz-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-moz-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@-o-keyframes wave{0%{-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}@keyframes wave{0%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px);opacity:.7}100%{-webkit-transform:translatey(-5px);-moz-transform:translatey(-5px);-o-transform:translatey(-5px);transform:translatey(-5px);opacity:1}}"})]})}a(7294)},5151:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=e=>{let{className:t="",height:a="h-24",hasHeader:r=!0,hasFooter:n=!1}=e;return(0,s.jsxs)("div",{className:"animate-pulse bg-white rounded-xl shadow-md overflow-hidden ".concat(a," ").concat(t),children:[r&&(0,s.jsxs)("div",{className:"h-10 bg-gray-100 px-3 py-2 flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 mr-3"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/5 mb-2"}),(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded w-2/5"})]}),(0,s.jsx)("div",{className:"w-16 h-4 bg-gray-200 rounded"})]}),(0,s.jsxs)("div",{className:"p-3 flex-1 flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-4/5"})]}),n&&(0,s.jsxs)("div",{className:"flex mt-3 pt-2 border-t border-gray-100",children:[(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-16 mr-2"}),(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-16"})]})]})]})}},1139:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=e=>{let{className:t="",height:a="h-64"}=e;return(0,s.jsxs)("div",{className:"animate-pulse bg-white rounded-xl shadow-md overflow-hidden ".concat(a," ").concat(t),children:[(0,s.jsxs)("div",{className:"h-10 bg-gray-100 px-4 py-2 flex items-center",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,s.jsxs)("div",{className:"ml-auto flex space-x-2",children:[(0,s.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-6 w-6 bg-gray-200 rounded"})]})]}),(0,s.jsxs)("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[(0,s.jsx)("div",{className:"flex items-end h-40 space-x-2 mt-4",children:[...Array(12)].map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-200 rounded-t w-full",style:{height:"".concat(15+Math.floor(70*Math.random()),"%")}},t))}),(0,s.jsx)("div",{className:"flex justify-between mt-2 pt-2 border-t border-gray-100",children:[...Array(6)].map((e,t)=>(0,s.jsx)("div",{className:"h-2 bg-gray-200 rounded w-8"},t))})]})]})}},8530:function(e,t,a){"use strict";a.d(t,{v:function(){return n}});var s=a(9734),r=a(1710);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldFetch:t=!0,revalidateOnFocus:a=!1,dedupingInterval:n=6e4,...l}=e,{data:i,error:c,mutate:o,isValidating:d}=(0,s.ZP)(t?"/api/users/me":null,async()=>{try{return await r.Z.getUserData()}catch(e){throw console.error("Error fetching user data:",e),e}},{revalidateOnFocus:a,dedupingInterval:n,...l});return{userData:i||{},isLoading:!c&&!i,isValidating:d,isError:c,mutate:o}}},2777:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(5893),r=a(7294),n=a(1163),l=a(9008),i=a.n(l),c=a(1664),o=a.n(c),d=a(5152),x=a.n(d),m=a(5493),h=a(2537),u=a(558),p=a(2062);a(5658);var y=a(5151),f=a(1139),g=a(4671),j=a(8530);let w=x()(()=>Promise.all([a.e(219),a.e(81)]).then(a.bind(a,7081)),{loadableGenerated:{webpack:()=>[7081]},loading:()=>(0,s.jsx)(f.Z,{})});function v(){(0,n.useRouter)();let{user:e}=(0,h.a)(),[t,a]=(0,r.useState)("monthly"),{expenses:l,isLoading:c,isError:d}=(0,g.t)(),{userData:x}=(0,j.v)(),{monthlyTotal:v,weeklyTotal:b,dailyExpenses:N,weeklyExpenses:k,weeklyExpensesChart:L}=(0,g.d)(l),_=null==x?void 0:x.budget;return(0,s.jsx)(u.i,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Dashboard | Piggy"})}),(0,s.jsxs)("div",{className:"px-4 py-6 max-w-lg mx-auto",children:[(0,s.jsx)("header",{className:"mb-6",children:(0,s.jsx)("div",{className:"flex justify-between items-start",children:(0,s.jsx)("div",{children:(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:["Welcome ",e&&(e.displayName||e.email),"!"]})})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>a("monthly"),className:"px-3 py-1 rounded-full text-sm font-medium ".concat("monthly"===t?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600"),children:"Monthly"}),(0,s.jsx)("button",{onClick:()=>a("weekly"),className:"px-3 py-1 rounded-full text-sm font-medium ".concat("weekly"===t?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600"),children:"Weekly"})]})]}),c?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(f.Z,{height:"h-64"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(y.Z,{}),(0,s.jsx)(y.Z,{})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(y.Z,{}),(0,s.jsx)(y.Z,{}),(0,s.jsx)(y.Z,{})]})]}):d?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("p",{className:"text-red-500",children:"Failed to load expenses. Please try again later."}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 btn-primary",children:"Try Again"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(w,{activeTab:t,monthlyTotal:v,weeklyTotal:b,dailyExpenses:N,weeklyExpenses:L,budget:_}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Latest Expenses"}),(0,s.jsx)(o(),{href:"/history",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"text-sm font-semibold bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(45deg, #42A5F5, #cf8ef9, #fe9169)"},children:"View All"})})]}),0===l.length?(0,s.jsx)("div",{className:"text-center py-6 text-gray-500",children:(0,s.jsx)("p",{children:"No expenses found. Add your first expense!"})}):(0,s.jsx)("div",{className:"space-y-3",children:l.slice(0,4).map(e=>{let t=e.area_tags&&e.area_tags.length>0?e.area_tags[0]:"default",a=new Date(e.timestamp||e.date),r=function(e){let t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}(a),n="default";return t&&(n=t.toLowerCase().includes("food")||t.toLowerCase().includes("restaurant")||t.toLowerCase().includes("grocery")?"food":t.toLowerCase().includes("transport")||t.toLowerCase().includes("travel")?"transport":t.toLowerCase().includes("shop")||t.toLowerCase().includes("clothes")?"shopping":t),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-3 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm",children:(0,s.jsx)(p.Z,{iconName:e.main_tag_icon||n,size:20,className:"text-gray-700"})}),(0,s.jsxs)("div",{className:"flex-1 ml-3",children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:e.short_text}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:r})]}),(0,s.jsxs)("p",{className:"font-bold text-gray-800",children:["-$",parseFloat(e.amount).toFixed(2)]})]},e.id||"".concat(e.timestamp,"-").concat(e.amount,"-").concat(Math.random()))})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(o(),{href:"/chat",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 cursor-pointer",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-primary",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Add Expense"})]})})})},"add-expense"),(0,s.jsx)("div",{children:(0,s.jsx)(o(),{href:"/reports",legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-4 flex flex-col items-center justify-center space-y-2 cursor-pointer",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gradient-secondary",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Monthly Report"})]})})})},"monthly-report")]})]})]})]})})}},1710:function(e,t,a){"use strict";var s=a(7066),r=a(8346);let n="https://moneymanager-backend-qwbwl7ldoa-oa.a.run.app";console.log("User service using API URL:",n);let l=async()=>{let e=(0,r.v0)(),t=e.currentUser;if(t)return await t.getIdToken();let a=localStorage.getItem("token");return a||new Promise((t,a)=>{let s;let r=e.onAuthStateChanged(e=>{s&&clearTimeout(s),r(),e?e.getIdToken().then(t).catch(a):a(Error("User not authenticated"))});s=setTimeout(()=>{r(),a(Error("User not authenticated"))},5e3)})},i=async()=>{let e=await l();return s.Z.create({baseURL:n,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})};t.Z={async getUserData(){try{let e=await i(),t=await e.get("/api/users/me");return t.data}catch(e){throw console.error("Error fetching user data:",e),e}},async updateUserData(e){try{let t=await i(),a=await t.patch("/api/users/me",e);return a.data}catch(e){throw console.error("Error updating user data:",e),e}}}}},function(e){e.O(0,[976,260,131,502,774,888,179],function(){return e(e.s=5732)}),_N_E=e.O()}]);